{"version":3,"sources":["actions/actionTypes.js","reducers/posts.js","helper/urls.js","actions/auth.js","actions/posts.js","actions/comment.js","actions/likes.js","components/Comment.js","components/Post.js","components/CreatePost.js","components/PostsList.js","components/SearchResult.js","actions/search.js","components/Search.js","components/Navbar.js","actions/friends.js","components/Friend.js","components/FriendList.js","components/Footer.js","components/Home.js","components/Page404.js","components/Login.js","actions/Sign_up_auth.js","components/SignUp.js","actions/edit_profile.js","components/Settings.js","actions/profile.js","components/Profile.js","actions/conversation.js","components/Message.js","components/Chat.js","components/App.js","reducers/auth.js","reducers/profile.js","reducers/friends.js","reducers/search.js","reducers/conversation.js","reducers/index.js","index.js","store/index.js"],"names":["UPDATE_POSTS","LOGIN_START","LOGIN_SUCCESS","LOGIN_FAILED","SIGNUP_START","SIGNUP_SUCCESS","SIGNUP_FAILED","AUTHENTICATE_USER","LOG_OUT","CLEAR_AUTH_STATE","EDIT_PROFILE_SUCCESS","EDIT_PROFILE_FAILED","USER_PROFILE_SUCCESS","USER_PROFILE_FAILED","USER_PROFILE_BEGIN","CLEAR_PROFILE_STATE","FETCH_USER_FRIENDS_SUCCESS","FETCH_USER_FRIENDS_FAILED","FETCH_USER_FRIENDS_BEGIN","ADD_FRIEND_FAILED","ADD_FRIEND_SUCCESS","ADD_FRIEND_BEGIN","REMOVE_FRIEND_FAILED","REMOVE_FRIEND_SUCCESS","REMOVE_FRIEND_BEGIN","CLEAR_FRIEND_STATE","ADD_POST_SUCCESS","ADD_POST_FAILED","ADD_COMMENT_SUCCESS","ADD_COMMENT_FAILED","TOGGLE_LIKE_SUCCESS","TOGGLE_LIKE_FAILED","FETCH_SEARCH_USERS","CLEAR_SERACH","FETCH_CONVERSATION_SUCCESS","FETCH_CONVERSATION_START","FETCH_CONVERSATION_FAILED","CLEAR_CONVERSATION","ADD_MESSAGE","initialPostsState","posts","next","prev","error","ROOT_URL","URLS","fetchposts","page","limit","login","signup","editProfile","fetchProfile","id","fetchFriends","AddFriend","RemoveFriend","createPost","createComment","toggleLike","type","SearchUsers","text","UploadPic","SERVER_URL","get_conversation","fid","url","URL","authorizeuser","data","console","log","dispatch","fetch","method","body","JSON","stringify","email","password","headers","then","response","json","success","localStorage","setItem","token","setTimeout","user","catch","err","logout","clearauthstate","updatePosts","content","getItem","Authorization","status","post","post_id","comment","create_comment_success","deleted","like","likeabletype","toggle_like_success","liketosent","Comment","handleToggleLike","props","_id","isLikedByUser","i","auth","likes","length","liked","this","className","name","onClick","src","Component","connect","state","Post","s","handleChange","e","target","value","setState","handleAddcomment","key","img","avatar","to","onChange","onKeyPress","onk","placeholder","map","CreatePost","post_content","handleSubmit","post_file","PostsList","isLoggedIn","background","desktopSize","mobileSize","textColor","SearchResult","result","searchResults","users","results","Search","handleInputFocus","focus","handleInputBlur","par","document","getElementsByClassName","isDescendant","contains","window","addEventListener","removeEventListener","search","onFocus","Navbar","logOut","removeItem","location","href","friendships","friendship","clear_friend_state","remove_friend_success","removed_id","Friend","friend","FriendList","friends","inProgress","signeduser","backColor","from_user","to_user","Footer","handlenextclick","handleprevclick","Home","Page404","Login","handleEmailInput","handlePasswordInput","preventDefault","from","pathname","required","disabled","createuser","confirmpassword","SignUp","handleConfirmPasswordInput","handleNameInput","edit_profile_success","edit_profile_failed","Settings","handleUpload","selectedFile","file","formData","FormData","append","handleFile","files","val","fieldname","handleEdit","editmode","handleBack","fun","handleSave","edit_user_profile","profile_changed","undefined","Profile","handleAddfriend","userId","match","params","handleRemoveFriend","checkIsUserFriend","friendsuserids","push","indexOf","prevProps","prevparam","curparam","isfriend","profileuser","profile","boxColor","style","marginBottom","fetch_conversation","conversation","Message","msg","Chat","handleSend","a","message","socket","emit","msgInput","current","setupconnections","self","socketConnecction","on","add_message","React","createRef","msgContainer","io","scrollIntoView","behavior","disconnect","off","boxColors","messages","idx","Key","ref","PrivateRoute","PrivateRouteProps","path","component","render","App","jwt_decode","AuthenticateUser","exact","initialAuthState","initialProfileState","initialFriendsState","initialSearchState","initialConversationState","combineReducers","action","newPosts","newLikes","filter","newComments","conv","store","createStore","reducer","applyMiddleware","logger","thunk","getState","ReactDOM","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.368ad6cc.chunk.js","sourcesContent":["export const UPDATE_POSTS = 'UPDATE_POSTS';\r\nexport const LOGIN_START = 'LOGIN_START';\r\nexport const LOGIN_SUCCESS = 'LOGIN_SUCCESS';\r\nexport const LOGIN_FAILED = 'LOGIN_FAILED';\r\n\r\nexport const SIGNUP_START = 'SIGNUP_START';\r\nexport const SIGNUP_SUCCESS = 'SIGNUP_SUCCESS';\r\nexport const SIGNUP_FAILED = 'SIGNUP_FAILED';\r\n\r\nexport const AUTHENTICATE_USER = 'AUTHENTICATE_USER';\r\n\r\nexport const LOG_OUT = 'LOG_OUT';\r\nexport const CLEAR_AUTH_STATE = 'CLEAR_AUTH_STATE';\r\n\r\nexport const EDIT_PROFILE_SUCCESS = 'EDIT_PROFILE_SUCCESS';\r\nexport const EDIT_PROFILE_FAILED = 'EDIT_PROFILE_FAILED';\r\n\r\nexport const USER_PROFILE_SUCCESS = 'USER_PROFILE_SUCCESS';\r\nexport const USER_PROFILE_FAILED = 'USER_PROFILE_FAILED';\r\nexport const USER_PROFILE_BEGIN = 'USER_PROFILE_BEGIN';\r\n\r\nexport const CLEAR_PROFILE_STATE = 'CLEAR_PROFILE_STATE';\r\n\r\nexport const FETCH_USER_FRIENDS_SUCCESS = 'FETCH_USER_FRIENDS_SUCCESS';\r\nexport const FETCH_USER_FRIENDS_FAILED = 'FETCH_USER_FRIENDS_FAILED';\r\nexport const FETCH_USER_FRIENDS_BEGIN = 'FETCH_USER_FRIENDS_BEGIN';\r\n\r\nexport const ADD_FRIEND_FAILED = 'ADD_FRIEND_FAILED';\r\nexport const ADD_FRIEND_SUCCESS = 'ADD_FRIEND_SUCESS';\r\nexport const ADD_FRIEND_BEGIN = 'ADD_FRIEND_BEGIN';\r\n\r\nexport const REMOVE_FRIEND_FAILED = 'REMOVE_FRIEND_FAILED';\r\nexport const REMOVE_FRIEND_SUCCESS = 'REMOVE_FRIEND_SUCESS';\r\nexport const REMOVE_FRIEND_BEGIN = 'REMOVE_FRIEND_BEGIN';\r\n\r\nexport const CLEAR_FRIEND_STATE = 'CLEAR_FRIEND_STATE';\r\n\r\nexport const ADD_POST_SUCCESS = 'ADD_POST_SUCCESS';\r\nexport const ADD_POST_FAILED = 'ADD_POST_FAILED';\r\nexport const ADD_POST_BEGIN = 'ADD_POST_BEGIN';\r\n\r\nexport const ADD_COMMENT_SUCCESS = 'ADD_COMMENT_SUCCESS';\r\nexport const ADD_COMMENT_FAILED = 'ADD_COMMENT_FAILED';\r\n\r\nexport const TOGGLE_LIKE_SUCCESS = 'TOGGLE_LIKE_SUCCESS';\r\nexport const TOGGLE_LIKE_FAILED = 'TOGGLE_LIKE_FAILED';\r\n\r\nexport const FETCH_SEARCH_USERS = 'FETCH_SEARCH_USERS';\r\nexport const CLEAR_SERACH = 'CLEAR_SEARCH';\r\n\r\nexport const FETCH_CONVERSATION_SUCCESS = 'FETCH_CONVERSATION_SUCCESS';\r\nexport const FETCH_CONVERSATION_START = 'FETCH_CONVERSATION_START';\r\nexport const FETCH_CONVERSATION_FAILED = 'FETCH_CONVERSATION_FAILED';\r\nexport const CLEAR_CONVERSATION = 'CLEAR_CONVERSATION';\r\nexport const ADD_MESSAGE = 'ADD_MESSAGE';\r\n","import {\r\n  ADD_COMMENT_FAILED,\r\n  ADD_COMMENT_SUCCESS,\r\n  ADD_POST_FAILED,\r\n  ADD_POST_SUCCESS,\r\n  TOGGLE_LIKE_FAILED,\r\n  TOGGLE_LIKE_SUCCESS,\r\n  UPDATE_POSTS,\r\n} from '../actions/actionTypes';\r\nconst initialPostsState = {\r\n  posts: [],\r\n  next: null,\r\n  prev: null,\r\n  error: null,\r\n};\r\nexport default function posts(state = initialPostsState, action) {\r\n  switch (action.type) {\r\n    case UPDATE_POSTS: {\r\n      return {\r\n        ...state,\r\n        posts: action.posts,\r\n        next: action.next,\r\n        prev: action.prev,\r\n        error: null,\r\n      };\r\n    }\r\n    case ADD_POST_SUCCESS: {\r\n      return {\r\n        posts: [action.post, ...state.posts],\r\n        error: false,\r\n      };\r\n    }\r\n    case ADD_POST_FAILED: {\r\n      return {\r\n        ...state,\r\n        error: action.error,\r\n      };\r\n    }\r\n    case ADD_COMMENT_SUCCESS: {\r\n      let newPosts = state.posts.map((post) => {\r\n        if (post._id == action.post_id) {\r\n          return {\r\n            ...post,\r\n            comment: [action.comment, ...post.comment],\r\n          };\r\n        }\r\n        return post;\r\n      });\r\n      return {\r\n        ...state,\r\n        posts: newPosts,\r\n        error: null,\r\n      };\r\n    }\r\n    case ADD_COMMENT_FAILED: {\r\n      return {\r\n        error: action.error,\r\n      };\r\n    }\r\n    case TOGGLE_LIKE_SUCCESS: {\r\n      if (action.likeabletype == 'Post') {\r\n        let newPosts = state.posts.map((post) => {\r\n          if (post._id == action.id) {\r\n            if (action.deleted) {\r\n              let newLikes = post.likes.filter(\r\n                (like) => like._id != action.like._id\r\n              );\r\n              return {\r\n                ...post,\r\n                likes: newLikes,\r\n              };\r\n            } else {\r\n              let newLikes = post.likes;\r\n              newLikes.push(action.like);\r\n              return {\r\n                ...post,\r\n                likes: newLikes,\r\n              };\r\n            }\r\n          }\r\n          return post;\r\n        });\r\n        return {\r\n          ...state,\r\n          posts: newPosts,\r\n        };\r\n      } else {\r\n        //Logic ffor comments like\r\n        let newPosts = state.posts.map((post) => {\r\n          let newComments = post.comment.map((comment) => {\r\n            if (comment._id == action.id) {\r\n              if (action.deleted) {\r\n                let newLikes = comment.likes.filter(\r\n                  (like) => like._id != action.like._id\r\n                );\r\n                return {\r\n                  ...comment,\r\n                  likes: newLikes,\r\n                };\r\n              } else {\r\n                let newLikes = comment.likes;\r\n                newLikes.push(action.like);\r\n                return {\r\n                  ...comment,\r\n                  likes: newLikes,\r\n                };\r\n              }\r\n            }\r\n            return comment;\r\n          });\r\n          return {\r\n            ...post,\r\n            comment: newComments,\r\n          };\r\n        });\r\n\r\n        return {\r\n          ...state,\r\n          posts: newPosts,\r\n        };\r\n      }\r\n    }\r\n    case TOGGLE_LIKE_FAILED: {\r\n    }\r\n    default: {\r\n      return state;\r\n    }\r\n  }\r\n}\r\n","const ROOT_URL = 'https://powerful-hamlet-85569.herokuapp.com/api';\r\n// const ROOT_URL = 'http://localhost:4000/api';\r\n\r\nconst URLS = {\r\n  fetchposts: (page = 1, limit = 5) =>\r\n    ROOT_URL + `/posts?page=${page}&limit=${limit}`,\r\n  login: () => ROOT_URL + '/users/login',\r\n  signup: () => ROOT_URL + '/users/signup',\r\n  editProfile: () => ROOT_URL + '/users/edit',\r\n  fetchProfile: (id) => ROOT_URL + `/users/${id}`,\r\n  fetchFriends: () => ROOT_URL + '/friendship/fetch_user_friends',\r\n  AddFriend: (id) => ROOT_URL + `/friendship/create_friendship?user_id=${id}`,\r\n  RemoveFriend: (id) =>\r\n    ROOT_URL + `/friendship/remove_friendship?user_id=${id}`,\r\n  createPost: () => ROOT_URL + '/posts/create',\r\n  createComment: () => ROOT_URL + '/comments',\r\n  toggleLike: (id, type) => ROOT_URL + `/likes/toggle?id=${id}&type=${type}`,\r\n  SearchUsers: (text) => ROOT_URL + `/users/search?text=${text}`,\r\n  UploadPic: () => ROOT_URL + `/users/editPhoto/`,\r\n  SERVER_URL: () => 'https://powerful-hamlet-85569.herokuapp.com',\r\n  get_conversation: (fid) => ROOT_URL + `/conversation/${fid}`,\r\n};\r\nexport default URLS;\r\n","import {\r\n  LOGIN_FAILED,\r\n  LOGIN_START,\r\n  LOGIN_SUCCESS,\r\n  AUTHENTICATE_USER,\r\n  LOG_OUT,\r\n  CLEAR_AUTH_STATE,\r\n  EDIT_PROFILE_SUCCESS,\r\n  EDIT_PROFILE_FAILED,\r\n} from './actionTypes';\r\nimport URL from '../helper/urls';\r\n\r\nconst url = URL.login();\r\n\r\nexport function authorizeuser(data) {\r\n  console.log(data);\r\n  return (dispatch) => {\r\n    dispatch(login_start());\r\n    fetch(url, {\r\n      // Adding method type\r\n      method: 'POST',\r\n\r\n      // Adding body or contents to send\r\n      body: JSON.stringify({\r\n        email: data.email,\r\n        password: data.password,\r\n      }),\r\n      // Adding headers to the request\r\n      headers: {\r\n        'Content-type': 'application/json; charset=UTF-8',\r\n      },\r\n    })\r\n      .then((response) => {\r\n        return response.json();\r\n      })\r\n      .then((data) => {\r\n        console.log(data);\r\n        if (data.success) {\r\n          localStorage.setItem('token', data.data.token);\r\n          setTimeout(() => {\r\n            dispatch(login_success(data.data.user));\r\n          }, 1000);\r\n        } else {\r\n          setTimeout(() => {\r\n            dispatch(login_failed(data.error));\r\n          }, 1000);\r\n        }\r\n      })\r\n      .catch((err) => console.log('error', err));\r\n  };\r\n}\r\n\r\nexport function login_start(data) {\r\n  // console.log(user_info);\r\n  return {\r\n    type: LOGIN_START,\r\n  };\r\n}\r\nexport function login_success(user) {\r\n  // console.log(user_info);\r\n  return {\r\n    type: LOGIN_SUCCESS,\r\n    user: user,\r\n  };\r\n}\r\nexport function login_failed(error) {\r\n  // console.log('failed due to', error);\r\n  return {\r\n    type: LOGIN_FAILED,\r\n    error: error,\r\n  };\r\n}\r\n\r\nexport function AuthenticateUser(user) {\r\n  return {\r\n    type: AUTHENTICATE_USER,\r\n    user: user,\r\n  };\r\n}\r\n\r\nexport function logout() {\r\n  return {\r\n    type: LOG_OUT,\r\n  };\r\n}\r\nexport function clearauthstate() {\r\n  return {\r\n    type: CLEAR_AUTH_STATE,\r\n  };\r\n}\r\n","import { ADD_POST_FAILED, ADD_POST_SUCCESS, UPDATE_POSTS } from './actionTypes';\r\nimport URL from '../helper/urls';\r\nimport { logout } from './auth';\r\n\r\nexport function fetchposts(page = 1) {\r\n  const url = URL.fetchposts(page);\r\n  return (dispatch) => {\r\n    fetch(url)\r\n      .then((response) => {\r\n        return response.json();\r\n      })\r\n      .then((data) => {\r\n        let next = data.next;\r\n        let prev = data.prev;\r\n        if (typeof next == 'undefined') {\r\n          next = null;\r\n        }\r\n        if (typeof prev == 'undefined') {\r\n          prev = null;\r\n        }\r\n        dispatch(updatePosts(data.data.posts, next, prev));\r\n      })\r\n      .catch((err) => console.log('error', err));\r\n  };\r\n}\r\n\r\nexport function updatePosts(posts, next, prev) {\r\n  return {\r\n    type: UPDATE_POSTS,\r\n    posts: posts,\r\n    next: next,\r\n    prev: prev,\r\n  };\r\n}\r\n\r\nexport function createPost(content) {\r\n  const url = URL.createPost();\r\n  return (dispatch) => {\r\n    const token = localStorage.getItem('token');\r\n    fetch(url, {\r\n      // Adding method type\r\n      method: 'POST',\r\n\r\n      // Adding body or contents to send\r\n      body: JSON.stringify({\r\n        content: content,\r\n      }),\r\n      // Adding headers to the request\r\n      headers: {\r\n        'Content-type': 'application/json; charset=UTF-8',\r\n        Authorization: `Bearer ${token}`,\r\n      },\r\n    })\r\n      .then((response) => {\r\n        if (response.status == '401') {\r\n          dispatch(logout());\r\n        }\r\n        return response.json();\r\n      })\r\n      .then((data) => {\r\n        if (data.success) {\r\n          setTimeout(() => {\r\n            dispatch(create_post_success(data.data.post));\r\n          }, 500);\r\n        } else {\r\n          setTimeout(() => {\r\n            dispatch(create_post_failed(data.error));\r\n          }, 500);\r\n        }\r\n      })\r\n      .catch((err) => console.log('error', err));\r\n  };\r\n}\r\n\r\nexport function create_post_success(post) {\r\n  return {\r\n    type: ADD_POST_SUCCESS,\r\n    post: post,\r\n  };\r\n}\r\nexport function create_post_failed(error) {\r\n  return {\r\n    type: ADD_POST_FAILED,\r\n    error: error,\r\n  };\r\n}\r\n","import { ADD_COMMENT_FAILED, ADD_COMMENT_SUCCESS } from './actionTypes';\r\nimport URL from '../helper/urls';\r\nimport { logout } from './auth';\r\n\r\nexport function createComment(content, id) {\r\n  const url = URL.createComment();\r\n  return (dispatch) => {\r\n    const token = localStorage.getItem('token');\r\n    fetch(url, {\r\n      // Adding method type\r\n      method: 'POST',\r\n\r\n      // Adding body or contents to send\r\n      body: JSON.stringify({\r\n        content: content,\r\n        post_id: id,\r\n      }),\r\n      // Adding headers to the request\r\n      headers: {\r\n        'Content-type': 'application/json; charset=UTF-8',\r\n        Authorization: `Bearer ${token}`,\r\n      },\r\n    })\r\n      .then((response) => {\r\n        if (response.status == '401') {\r\n          dispatch(logout());\r\n        }\r\n        return response.json();\r\n      })\r\n      .then((data) => {\r\n        console.log(data);\r\n        if (data.success) {\r\n          setTimeout(() => {\r\n            dispatch(create_comment_success(data.comment, id));\r\n          }, 500);\r\n        } else {\r\n          setTimeout(() => {\r\n            dispatch(create_comment_failed(data.error));\r\n          }, 500);\r\n        }\r\n      })\r\n      .catch((err) => console.log('error', err));\r\n  };\r\n}\r\n\r\nexport function create_comment_success(comment, id) {\r\n  return {\r\n    type: ADD_COMMENT_SUCCESS,\r\n    comment: comment,\r\n    post_id: id,\r\n  };\r\n}\r\nexport function create_comment_failed(error) {\r\n  return {\r\n    type: ADD_COMMENT_FAILED,\r\n    error: error,\r\n  };\r\n}\r\n","import { TOGGLE_LIKE_SUCCESS, TOGGLE_LIKE_FAILED } from './actionTypes';\r\nimport URL from '../helper/urls';\r\n\r\nexport function toggleLike(id, type) {\r\n  const url = URL.toggleLike(id, type);\r\n  return (dispatch) => {\r\n    const token = localStorage.getItem('token');\r\n    fetch(url, {\r\n      // Adding method type\r\n      method: 'POST',\r\n      // Adding headers to the request\r\n      headers: {\r\n        'Content-type': 'application/json; charset=UTF-8',\r\n        Authorization: `Bearer ${token}`,\r\n      },\r\n    })\r\n      .then((response) => {\r\n        return response.json();\r\n      })\r\n      .then((data) => {\r\n        console.log(data);\r\n        if (data.success) {\r\n          setTimeout(() => {\r\n            dispatch(\r\n              toggle_like_success(\r\n                data.data.deleted,\r\n                id,\r\n                type,\r\n                data.data.liketosent\r\n              )\r\n            );\r\n          }, 50);\r\n        } else {\r\n          setTimeout(() => {\r\n            dispatch(toggle_like_failed(data.error));\r\n          }, 50);\r\n        }\r\n      })\r\n      .catch((err) => console.log('error', err));\r\n  };\r\n}\r\n\r\nexport function toggle_like_success(deleted, id, type, like) {\r\n  return {\r\n    type: TOGGLE_LIKE_SUCCESS,\r\n    deleted: deleted,\r\n    id: id,\r\n    likeabletype: type,\r\n    like: like,\r\n  };\r\n}\r\nexport function toggle_like_failed(error) {\r\n  return {\r\n    type: TOGGLE_LIKE_FAILED,\r\n    error: error,\r\n  };\r\n}\r\n","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { toggleLike } from '../actions/likes';\r\n\r\nclass Comment extends Component {\r\n  handleToggleLike = () => {\r\n    const { comment } = this.props;\r\n    this.props.dispatch(toggleLike(comment._id, 'Comment'));\r\n  };\r\n  isLikedByUser = () => {\r\n    const { comment } = this.props;\r\n    const { user } = this.props.auth;\r\n    let i;\r\n    for (i = 0; i < comment.likes.length; i++) {\r\n      if (comment.likes[i].user == user._id) {\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  };\r\n  render() {\r\n    let liked = this.isLikedByUser();\r\n    console.log(liked);\r\n    const { comment } = this.props;\r\n    return (\r\n      <div className=\"comment\">\r\n        <div className=\"name-time\">{comment.user.name} a minute ago</div>\r\n        <div className=\"comment-content\">{comment.content}</div>\r\n        <div className=\"comment-likes-count\">\r\n          <img\r\n            onClick={this.handleToggleLike}\r\n            src={\r\n              liked\r\n                ? 'https://cdn-icons-png.flaticon.com/512/633/633991.png'\r\n                : 'https://cdn-icons-png.flaticon.com/512/633/633759.png'\r\n            }\r\n          ></img>\r\n          {comment.likes.length}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nfunction mapToState(state) {\r\n  return {\r\n    auth: state.auth,\r\n    posts: state.posts,\r\n  };\r\n}\r\nexport default connect(mapToState)(Comment);\r\n","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { Link } from 'react-router-dom';\r\nimport { createComment } from '../actions/comment';\r\nimport { toggleLike } from '../actions/likes';\r\nimport Comment from './Comment';\r\nimport URLS from '../helper/urls';\r\n\r\nclass Post extends Component {\r\n  constructor(s) {\r\n    super();\r\n    this.state = {\r\n      content: '',\r\n    };\r\n  }\r\n  handleChange = (e) => {\r\n    let content = e.target.value;\r\n    this.setState({\r\n      content: content,\r\n    });\r\n  };\r\n  handleAddcomment = (e) => {\r\n    const { post } = this.props;\r\n    if (this.state.content !== '' && e.key == 'Enter') {\r\n      this.props.dispatch(createComment(this.state.content, post._id));\r\n      this.setState({\r\n        content: '',\r\n      });\r\n    }\r\n  };\r\n  handleToggleLike = () => {\r\n    const { post } = this.props;\r\n    this.props.dispatch(toggleLike(post._id, 'Post'));\r\n  };\r\n  isLikedByUser = () => {\r\n    const { post } = this.props;\r\n    const { user } = this.props.auth;\r\n    let i;\r\n    for (i = 0; i < post.likes.length; i++) {\r\n      if (post.likes[i].user == user._id) {\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  };\r\n  render() {\r\n    const { post } = this.props;\r\n    let liked = this.isLikedByUser();\r\n    const img = URLS.SERVER_URL() + post.user.avatar;\r\n    console.log('LIKED', liked);\r\n    return (\r\n      <div className=\"Post\">\r\n        <div className=\"user-info\">\r\n          <Link to={`/user/${post.user._id}`}>\r\n            <img\r\n              src={\r\n                post.user.avatar\r\n                  ? img\r\n                  : 'https://cdn-icons-png.flaticon.com/512/2922/2922506.png'\r\n              }\r\n              className=\"post-icon\"\r\n            ></img>\r\n          </Link>\r\n          <div className=\"post-user-name\">\r\n            {post.user.name}\r\n            <div className=\"time\">a minute ago</div>\r\n          </div>\r\n        </div>\r\n        <p className=\"post-content\">{post.content}</p>\r\n        <div className=\"likes-comment-icon\">\r\n          <img\r\n            onClick={this.handleToggleLike}\r\n            src={\r\n              liked\r\n                ? 'https://cdn-icons-png.flaticon.com/512/1076/1076984.png'\r\n                : 'https://cdn-icons-png.flaticon.com/512/1077/1077035.png'\r\n            }\r\n          ></img>\r\n          <div className=\"likes-count\">{post.likes.length}</div>\r\n          <img src=\"https://cdn-icons-png.flaticon.com/512/1380/1380338.png\"></img>\r\n          <div className=\"comments-count\">{post.comment.length}</div>\r\n        </div>\r\n        <div className=\"comments\">\r\n          <input\r\n            onChange={this.handleChange}\r\n            onKeyPress={this.handleAddcomment}\r\n            onk\r\n            className=\"comments-form\"\r\n            placeholder=\"Type your comment here\"\r\n          ></input>\r\n          {post.comment.map((comment) => (\r\n            <Comment comment={comment} key={comment._id} />\r\n          ))}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nfunction mapTostate(state) {\r\n  return {\r\n    auth: state.auth,\r\n    posts: state.posts,\r\n  };\r\n}\r\nexport default connect(mapTostate)(Post);\r\n","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { createPost } from '../actions/posts';\r\n\r\nclass CreatePost extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      post_content: '',\r\n      post_file: null,\r\n    };\r\n  }\r\n  handleChange = (e) => {\r\n    this.setState({\r\n      post_content: e.target.value,\r\n    });\r\n  };\r\n  handleSubmit = () => {\r\n    let content = this.state.post_content;\r\n    if (content.length != 0) {\r\n      this.props.dispatch(createPost(content));\r\n    }\r\n  };\r\n  render() {\r\n    const { error } = this.props.posts;\r\n    return (\r\n      <div className=\"post-form-container\">\r\n        {error == false && (\r\n          <div className=\"success-dialog\">Post Created Successfully</div>\r\n        )}\r\n        {error && <div className=\"alert-dialog\">{error}</div>}\r\n        <div className=\"post-input-container\">\r\n          <textarea\r\n            onChange={(e) => this.handleChange(e)}\r\n            placeholder=\"What's in your mind?\"\r\n          ></textarea>\r\n        </div>\r\n        <div className=\"post-btn-container\">\r\n          <div onClick={this.handleSubmit} className=\"post-btn\">\r\n            Add Post\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nfunction mapToState(state) {\r\n  return {\r\n    posts: state.posts,\r\n  };\r\n}\r\nexport default connect(mapToState)(CreatePost);\r\n","import React, { Component } from 'react';\r\nimport Post from './Post';\r\nimport { connect } from 'react-redux';\r\nimport propTypes from 'prop-types';\r\nimport CreatePost from './CreatePost';\r\nimport { fetchposts } from '../actions/posts';\r\nimport { BookLoader } from 'react-awesome-loaders';\r\n\r\nclass PostsList extends Component {\r\n  componentDidMount() {\r\n    this.props.dispatch(fetchposts());\r\n  }\r\n  render() {\r\n    const { posts, error } = this.props.posts;\r\n    const { isLoggedIn } = this.props.auth;\r\n    if (posts.length == 0) {\r\n      return (\r\n        <BookLoader\r\n          text=\"Fetching Posts...\"\r\n          background={'linear-gradient(135deg, #6066FA, #4645F6)'}\r\n          desktopSize={'50px'}\r\n          mobileSize={'50px'}\r\n          textColor={'#4645F6'}\r\n        />\r\n      );\r\n    }\r\n    return (\r\n      <div className=\"post-list1\">\r\n        {isLoggedIn && <CreatePost />}\r\n        <div className={isLoggedIn ? 'Post-list' : 'Post-listN'}>\r\n          {posts.map((post) => (\r\n            <Post key={post._id} post={post} />\r\n          ))}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nfunction mapToState(state) {\r\n  return {\r\n    auth: state.auth,\r\n    posts: state.posts,\r\n  };\r\n}\r\nexport default connect(mapToState)(PostsList);\r\n","import React, { Component } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport URLS from '../helper/urls';\r\n\r\nclass SearchResult extends Component {\r\n  render() {\r\n    const { result } = this.props;\r\n    console.log('RESULT', result);\r\n    const img = URLS.SERVER_URL() + result.avatar;\r\n    return (\r\n      <Link to={`/user/${result._id}`}>\r\n        <div className=\"result\">\r\n          <img\r\n            src={\r\n              result.avatar\r\n                ? img\r\n                : 'https://cdn-icons-png.flaticon.com/512/2922/2922506.png'\r\n            }\r\n          ></img>\r\n          <div>{result.name}</div>\r\n        </div>\r\n      </Link>\r\n    );\r\n  }\r\n}\r\n\r\nexport default SearchResult;\r\n","import { FETCH_SEARCH_USERS, CLEAR_SERACH } from './actionTypes';\r\nimport URL from '../helper/urls';\r\nimport { logout } from './auth';\r\n\r\nexport function SearchUsers(text) {\r\n  const url = URL.SearchUsers(text);\r\n  return (dispatch) => {\r\n    const token = localStorage.getItem('token');\r\n    fetch(url, {\r\n      method: 'GET',\r\n      headers: {\r\n        'Content-type': 'application/json; charset=UTF-8',\r\n        Authorization: `Bearer ${token}`,\r\n      },\r\n    })\r\n      .then((response) => {\r\n        if (response.status == '401') {\r\n          dispatch(logout());\r\n        }\r\n        return response.json();\r\n      })\r\n      .then((data) => {\r\n        dispatch(updateSearch(data.data.users));\r\n      })\r\n      .catch((err) => console.log('error', err));\r\n  };\r\n}\r\n\r\nexport function updateSearch(searchResults) {\r\n  return {\r\n    type: FETCH_SEARCH_USERS,\r\n    results: searchResults,\r\n  };\r\n}\r\nexport function clearSearch() {\r\n  return {\r\n    type: CLEAR_SERACH,\r\n  };\r\n}\r\n","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { clearSearch, SearchUsers } from '../actions/search';\r\nimport SearchResult from './SearchResult';\r\n\r\nclass Search extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      focus: false,\r\n    };\r\n  }\r\n  handleChange = (e) => {\r\n    let text = e.target.value;\r\n    if (text !== '') {\r\n      this.props.dispatch(SearchUsers(text));\r\n    } else {\r\n      this.props.dispatch(clearSearch());\r\n    }\r\n  };\r\n  handleInputFocus = () => {\r\n    this.setState({ focus: true });\r\n  };\r\n\r\n  handleInputBlur = (e) => {\r\n    const par = document.getElementsByClassName('search');\r\n    if (par.length != 0) {\r\n      const isDescendant = par[0].contains(e.target);\r\n      console.log(isDescendant);\r\n      if (!isDescendant) {\r\n        this.setState({ focus: false });\r\n      }\r\n    }\r\n  };\r\n  componentDidMount() {\r\n    window.addEventListener('click', (e) => {\r\n      this.handleInputBlur(e);\r\n    });\r\n  }\r\n  componentWillUnmount() {\r\n    window.removeEventListener('click', (e) => {\r\n      this.handleInputBlur(e);\r\n    });\r\n  }\r\n\r\n  render() {\r\n    const { results } = this.props.search;\r\n    console.log('RESULTS', results);\r\n    const { focus } = this.state;\r\n    return (\r\n      <div className=\"search\" onFocus={this.handleInputFocus}>\r\n        <input onChange={this.handleChange} placeholder=\"Search name\"></input>\r\n        {results.length != 0 && focus != false && (\r\n          <div className=\"search-results\">\r\n            {results.map((result) => {\r\n              return (\r\n                <SearchResult\r\n                  onFocus={this.handleInputFocus}\r\n                  result={result}\r\n                  key={result._id}\r\n                />\r\n              );\r\n            })}\r\n          </div>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nfunction mapToState(state) {\r\n  return {\r\n    auth: state.auth,\r\n    search: state.search,\r\n  };\r\n}\r\nexport default connect(mapToState)(Search);\r\n","import React, { Component } from 'react';\r\nimport SearchResult from './SearchResult';\r\nimport { connect } from 'react-redux';\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport { logout } from '../actions/auth';\r\n\r\nimport Search from './Search';\r\nimport URLS from '../helper/urls';\r\n\r\nclass Navbar extends Component {\r\n  logOut = () => {\r\n    localStorage.removeItem('token');\r\n    this.props.dispatch(logout());\r\n  };\r\n  render() {\r\n    const { isLoggedIn, user } = this.props.auth;\r\n    const url = window.location.href;\r\n    console.log(url);\r\n    const img = URLS.SERVER_URL() + user.avatar;\r\n    return (\r\n      <div className=\"navbar\">\r\n        <div className=\"nav-left-container\">\r\n          <Link to=\"/\">\r\n            <img\r\n              src=\"https://cdn-icons-png.flaticon.com/512/2111/2111421.png\"\r\n              className=\"logo\"\r\n            ></img>\r\n          </Link>\r\n          <div className=\"site-name\">Socializer</div>\r\n        </div>\r\n        <div className=\"nav-middle-container\">\r\n          <Search />\r\n        </div>\r\n        <div className=\"nav-right-container\">\r\n          {isLoggedIn && (\r\n            <div className=\"user-nav\">\r\n              <Link to=\"/settings\">\r\n                <img\r\n                  src={\r\n                    user.avatar\r\n                      ? img\r\n                      : 'https://cdn-icons-png.flaticon.com/512/2922/2922506.png'\r\n                  }\r\n                  className=\"user-logo\"\r\n                ></img>\r\n              </Link>\r\n              <div className=\"username-nav\">{user.name}</div>\r\n            </div>\r\n          )}\r\n          {isLoggedIn == false && (\r\n            <Link className=\"nav-btn\" to=\"/login\">\r\n              <div>LogIn</div>\r\n            </Link>\r\n          )}\r\n          {isLoggedIn && (\r\n            <button onClick={this.logOut} className=\"logout-btn\">\r\n              LogOut\r\n            </button>\r\n          )}\r\n          {isLoggedIn == false && (\r\n            <Link className=\"nav-btn\" to=\"/Register\">\r\n              <div>Register</div>\r\n            </Link>\r\n          )}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nfunction mapToState(state) {\r\n  return {\r\n    auth: state.auth,\r\n  };\r\n}\r\nexport default connect(mapToState)(Navbar);\r\n","import {\r\n  FETCH_USER_FRIENDS_BEGIN,\r\n  FETCH_USER_FRIENDS_SUCCESS,\r\n  FETCH_USER_FRIENDS_FAILED,\r\n  ADD_FRIEND_BEGIN,\r\n  ADD_FRIEND_FAILED,\r\n  ADD_FRIEND_SUCCESS,\r\n  REMOVE_FRIEND_BEGIN,\r\n  REMOVE_FRIEND_FAILED,\r\n  REMOVE_FRIEND_SUCCESS,\r\n  UPDATE_POSTS,\r\n  CLEAR_FRIEND_STATE,\r\n} from './actionTypes';\r\nimport URL from '../helper/urls';\r\nimport { logout } from './auth';\r\n\r\nexport function fetchFriends() {\r\n  return (dispatch) => {\r\n    const url = URL.fetchFriends();\r\n    const token = localStorage.getItem('token');\r\n    dispatch(fetch_friends_begin());\r\n    fetch(url, {\r\n      // Adding method type\r\n      method: 'GET',\r\n      // Adding headers to the request\r\n      headers: {\r\n        'Content-type': 'application/json; charset=UTF-8',\r\n        Authorization: `Bearer ${token}`,\r\n      },\r\n    })\r\n      .then((response) => {\r\n        if (response.status == '401') {\r\n          dispatch(logout());\r\n        }\r\n        return response.json();\r\n      })\r\n      .then((data) => {\r\n        console.log('Data', data);\r\n        if (data.success) {\r\n          setTimeout(() => {\r\n            dispatch(fetch_friends_success(data.data.friendships));\r\n          }, 500);\r\n        } else {\r\n          setTimeout(() => {\r\n            dispatch(fetch_friends_failed(data.error));\r\n          }, 500);\r\n        }\r\n      })\r\n      .catch((err) => console.log('error', err));\r\n  };\r\n}\r\n\r\nexport function fetch_friends_success(friendships) {\r\n  return {\r\n    type: FETCH_USER_FRIENDS_SUCCESS,\r\n    friendships: friendships,\r\n  };\r\n}\r\n\r\nexport function fetch_friends_begin() {\r\n  return {\r\n    type: FETCH_USER_FRIENDS_BEGIN,\r\n  };\r\n}\r\nexport function fetch_friends_failed(error) {\r\n  return {\r\n    type: FETCH_USER_FRIENDS_FAILED,\r\n    error: error,\r\n  };\r\n}\r\n\r\nexport function AddFriend(id) {\r\n  return (dispatch) => {\r\n    const url = URL.AddFriend(id);\r\n    const token = localStorage.getItem('token');\r\n    dispatch(add_friend_begin());\r\n    fetch(url, {\r\n      // Adding method type\r\n      method: 'POST',\r\n      // Adding headers to the request\r\n      headers: {\r\n        'Content-type': 'application/json; charset=UTF-8',\r\n        Authorization: `Bearer ${token}`,\r\n      },\r\n    })\r\n      .then((response) => {\r\n        if (response.status == '401') {\r\n          dispatch(logout());\r\n        }\r\n        return response.json();\r\n      })\r\n      .then((data) => {\r\n        console.log('Data', data);\r\n        if (data.success) {\r\n          setTimeout(() => {\r\n            dispatch(add_friend_success(data.data.friendship));\r\n          }, 500);\r\n        } else {\r\n          setTimeout(() => {\r\n            dispatch(add_friend_failed(data.error));\r\n          }, 500);\r\n        }\r\n      })\r\n      .catch((err) => console.log('error', err));\r\n  };\r\n}\r\n\r\nexport function add_friend_success(friendship) {\r\n  return {\r\n    type: ADD_FRIEND_SUCCESS,\r\n    friendship: friendship,\r\n  };\r\n}\r\n\r\nexport function add_friend_begin() {\r\n  return {\r\n    type: ADD_FRIEND_BEGIN,\r\n  };\r\n}\r\nexport function add_friend_failed(error) {\r\n  return {\r\n    type: ADD_FRIEND_FAILED,\r\n    error: error,\r\n  };\r\n}\r\n\r\nexport function clear_friend_state() {\r\n  return {\r\n    type: CLEAR_FRIEND_STATE,\r\n  };\r\n}\r\n\r\nexport function RemoveFriend(id) {\r\n  return (dispatch) => {\r\n    const url = URL.RemoveFriend(id);\r\n    const token = localStorage.getItem('token');\r\n    dispatch(remove_friend_begin());\r\n    fetch(url, {\r\n      // Adding method type\r\n      method: 'POST',\r\n      // Adding headers to the request\r\n      headers: {\r\n        'Content-type': 'application/json; charset=UTF-8',\r\n        Authorization: `Bearer ${token}`,\r\n      },\r\n    })\r\n      .then((response) => {\r\n        if (response.status == '401') {\r\n          dispatch(logout());\r\n        }\r\n        return response.json();\r\n      })\r\n      .then((data) => {\r\n        console.log('Data', data);\r\n        if (data.success) {\r\n          setTimeout(() => {\r\n            dispatch(remove_friend_success(data.removed_id));\r\n          }, 500);\r\n        } else {\r\n          setTimeout(() => {\r\n            dispatch(remove_friend_failed(data.error));\r\n          }, 500);\r\n        }\r\n      })\r\n      .catch((err) => console.log('error', err));\r\n  };\r\n}\r\n\r\nexport function remove_friend_success(id) {\r\n  return {\r\n    type: REMOVE_FRIEND_SUCCESS,\r\n    id: id,\r\n  };\r\n}\r\n\r\nexport function remove_friend_begin() {\r\n  return {\r\n    type: REMOVE_FRIEND_BEGIN,\r\n  };\r\n}\r\nexport function remove_friend_failed(error) {\r\n  return {\r\n    type: REMOVE_FRIEND_FAILED,\r\n    error: error,\r\n  };\r\n}\r\n","import React, { Component } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport URLS from '../helper/urls';\r\n\r\nclass Friend extends Component {\r\n  render() {\r\n    const { friend } = this.props;\r\n    const { fid } = this.props;\r\n    const img = URLS.SERVER_URL() + friend.avatar;\r\n    return (\r\n      <div className=\"friend\">\r\n        <div className=\"friend-icon\">\r\n          <Link to={`/user/${friend._id}`}>\r\n            <img\r\n              src={\r\n                friend.avatar\r\n                  ? img\r\n                  : 'https://cdn-icons-png.flaticon.com/512/2922/2922506.png'\r\n              }\r\n            ></img>\r\n          </Link>\r\n        </div>\r\n        <div className=\"friend-name\">\r\n          <div>{friend.name}</div>\r\n        </div>\r\n        <Link to={`/chat/${fid}`}>\r\n          <button className=\"chat-btn\">Chat</button>\r\n        </Link>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Friend;\r\n","import React, { Component } from 'react';\r\nimport { Redirect } from 'react-router';\r\nimport { connect } from 'react-redux';\r\nimport { clear_friend_state, fetchFriends } from '../actions/friends';\r\nimport Friend from './Friend';\r\nimport { WifiLoader } from 'react-awesome-loaders';\r\n\r\nclass FriendList extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n  }\r\n  componentWillUnmount() {\r\n    this.props.dispatch(clear_friend_state());\r\n  }\r\n  componentDidMount() {\r\n    this.props.dispatch(fetchFriends());\r\n  }\r\n  render() {\r\n    const { friendships, inProgress, error } = this.props.friends;\r\n    const signeduser = this.props.auth.user;\r\n    if (inProgress) {\r\n      return (\r\n        <WifiLoader\r\n          className=\"loader\"\r\n          background={'transparent'}\r\n          backColor={'rgb(66, 110, 240)'}\r\n          desktopSize={'90px'}\r\n          mobileSize={'90px'}\r\n          text={'Fetching Friends...'}\r\n          backColor=\"rgb(66, 110, 240)\"\r\n          frontColor=\"#4645F6\"\r\n        />\r\n      );\r\n    }\r\n    if (error) {\r\n      return <h1>{error}</h1>;\r\n    }\r\n    return (\r\n      <div className=\"friends-container\">\r\n        <div className=\"friends-heading\">Friends</div>\r\n        {friendships.map((friendship) => {\r\n          let friend = friendship.from_user;\r\n          if (friend._id == signeduser._id) {\r\n            friend = friendship.to_user;\r\n          }\r\n          return <Friend friend={friend} fid={friendship._id} />;\r\n        })}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nfunction mapToState(state) {\r\n  return {\r\n    auth: state.auth,\r\n    friends: state.friends,\r\n  };\r\n}\r\n\r\nexport default connect(mapToState)(FriendList);\r\n","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { fetchposts } from '../actions/posts';\r\n\r\nclass Footer extends Component {\r\n  handlenextclick = () => {\r\n    const { next } = this.props.posts;\r\n    this.props.dispatch(fetchposts(next.page));\r\n  };\r\n  handleprevclick = () => {\r\n    const { prev } = this.props.posts;\r\n    this.props.dispatch(fetchposts(prev.page));\r\n  };\r\n  render() {\r\n    const { posts } = this.props.posts;\r\n    const { next, prev } = this.props.posts;\r\n\r\n    return (\r\n      <div className=\"Footer-container\">\r\n        <div className=\"footer-btns\">\r\n          <button\r\n            onClick={this.handleprevclick}\r\n            className={prev ? 'fbtn' : 'fbtn hidebtn'}\r\n          >\r\n            Prev\r\n          </button>\r\n          <button\r\n            onClick={this.handlenextclick}\r\n            className={next ? 'fbtn' : 'fbtn hidebtn'}\r\n          >\r\n            Next\r\n          </button>\r\n        </div>\r\n        <div className=\"footer\">&copy; 2021 Apoorv Jain</div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nfunction mapTostate(state) {\r\n  return {\r\n    posts: state.posts,\r\n  };\r\n}\r\nexport default connect(mapTostate)(Footer);\r\n","import { func } from 'prop-types';\r\nimport React, { Component } from 'react';\r\nimport FriendList from './FriendList';\r\nimport { connect } from 'react-redux';\r\nimport PostsList from './PostsList';\r\nimport { fetchposts } from '../actions/posts';\r\nimport Footer from './Footer';\r\n\r\nclass Home extends Component {\r\n  render() {\r\n    const { isLoggedIn } = this.props.auth;\r\n    console.log('props', this.props);\r\n    return (\r\n      <div className=\"home\">\r\n        <PostsList />\r\n        {isLoggedIn && <FriendList />}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nfunction mapToState(state) {\r\n  return {\r\n    auth: state.auth,\r\n  };\r\n}\r\nexport default connect(mapToState)(Home);\r\n","import React from 'react';\r\n\r\nfunction Page404(props) {\r\n  return (\r\n    <div>\r\n      <h1>404: Page not found</h1>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Page404;\r\n","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { Redirect } from 'react-router';\r\nimport { authorizeuser, clearauthstate } from '../actions/auth';\r\n\r\nclass Login extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    // this.emailInputref = React.createRef();\r\n    // this.passwordInputref = React.createRef();\r\n    this.state = {\r\n      email: '',\r\n      password: '',\r\n    };\r\n  }\r\n  handleEmailInput = (e) => {\r\n    let email = e.target.value;\r\n    this.setState({\r\n      email: email,\r\n    });\r\n  };\r\n  handlePasswordInput = (e) => {\r\n    let password = e.target.value;\r\n    this.setState({\r\n      password: password,\r\n    });\r\n  };\r\n  handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    // console.log('emailref', this.emailInputref);\r\n    // console.log('passwordref', this.passwordInputref);\r\n    console.log(this.state);\r\n    this.props.dispatch(authorizeuser(this.state));\r\n  };\r\n  componentWillUnmount() {\r\n    this.props.dispatch(clearauthstate());\r\n  }\r\n  render() {\r\n    const { error, inProgress, user, isLoggedIn } = this.props.auth;\r\n    const { from } = this.props.location.state || {\r\n      from: { pathname: '/' },\r\n    };\r\n    if (isLoggedIn) {\r\n      return <Redirect to={from} />;\r\n    }\r\n    console.log(this.props.auth);\r\n    return (\r\n      <div className=\"login-container\">\r\n        <div className=\"login-heading\">Login</div>\r\n        {error && <div className=\"alert-dialog\">{error}</div>}\r\n        {isLoggedIn && (\r\n          <div className=\"success-dialog\">{`Successfully signed in as ${user.name}`}</div>\r\n        )}\r\n        <form className=\"login-form\">\r\n          <input\r\n            type=\"email\"\r\n            required\r\n            placeholder=\"Enter your email\"\r\n            onChange={this.handleEmailInput}\r\n            // ref={this.emailInputref}\r\n          ></input>\r\n          <input\r\n            type=\"password\"\r\n            required\r\n            placeholder=\"Enter your password\"\r\n            onChange={this.handlePasswordInput}\r\n            // ref={this.passwordInputref}\r\n          ></input>\r\n          {inProgress ? (\r\n            <button\r\n              type=\"submit\"\r\n              className=\"submit-btn\"\r\n              onClick={this.handleSubmit}\r\n              disabled={inProgress}\r\n            >\r\n              Logging In\r\n            </button>\r\n          ) : (\r\n            <button\r\n              type=\"submit\"\r\n              className=\"submit-btn\"\r\n              onClick={this.handleSubmit}\r\n            >\r\n              Log In\r\n            </button>\r\n          )}\r\n        </form>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nfunction mapToState(state) {\r\n  return {\r\n    auth: state.auth,\r\n  };\r\n}\r\nexport default connect(mapToState)(Login);\r\n","import { SIGNUP_FAILED, SIGNUP_START, SIGNUP_SUCCESS } from './actionTypes';\r\nimport URL from '../helper/urls';\r\n\r\nconst url = URL.signup();\r\n\r\nexport function createuser(data) {\r\n  console.log(data);\r\n  return (dispatch) => {\r\n    dispatch(signup_start());\r\n    fetch(url, {\r\n      // Adding method type\r\n      method: 'POST',\r\n\r\n      // Adding body or contents to send\r\n      body: JSON.stringify({\r\n        email: data.email,\r\n        password: data.password,\r\n        confirmpassword: data.confirmpassword,\r\n        name: data.name,\r\n      }),\r\n      // Adding headers to the request\r\n      headers: {\r\n        'Content-type': 'application/json; charset=UTF-8',\r\n      },\r\n    })\r\n      .then((response) => {\r\n        return response.json();\r\n      })\r\n      .then((data) => {\r\n        console.log(data);\r\n        if (data.success) {\r\n          setTimeout(() => {\r\n            localStorage.setItem('token', data.data.token);\r\n            dispatch(signup_success(data.data.user));\r\n          }, 1000);\r\n        } else {\r\n          setTimeout(() => {\r\n            dispatch(signup_failed(data.error));\r\n          }, 1000);\r\n        }\r\n      })\r\n      .catch((err) => console.log('error', err));\r\n  };\r\n}\r\n\r\nexport function signup_start() {\r\n  // console.log(user_info);\r\n  return {\r\n    type: SIGNUP_START,\r\n  };\r\n}\r\nexport function signup_success(user) {\r\n  // console.log(user_info);\r\n  return {\r\n    type: SIGNUP_SUCCESS,\r\n    user: user,\r\n  };\r\n}\r\nexport function signup_failed(error) {\r\n  // console.log('failed due to', error);\r\n  return {\r\n    type: SIGNUP_FAILED,\r\n    error: error,\r\n  };\r\n}\r\n","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { Redirect } from 'react-router';\r\nimport { authorizeuser, clearauthstate } from '../actions/auth';\r\nimport { createuser } from '../actions/Sign_up_auth';\r\n\r\nclass SignUp extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    // this.emailInputref = React.createRef();\r\n    // this.passwordInputref = React.createRef();\r\n    this.state = {\r\n      email: '',\r\n      password: '',\r\n      confirmpassword: '',\r\n      name: '',\r\n    };\r\n  }\r\n  handleEmailInput = (e) => {\r\n    let email = e.target.value;\r\n    this.setState({\r\n      email: email,\r\n    });\r\n  };\r\n  handleConfirmPasswordInput = (e) => {\r\n    let confirmpassword = e.target.value;\r\n    this.setState({\r\n      confirmpassword: confirmpassword,\r\n    });\r\n  };\r\n  handleNameInput = (e) => {\r\n    let name = e.target.value;\r\n    this.setState({\r\n      name: name,\r\n    });\r\n  };\r\n  handlePasswordInput = (e) => {\r\n    let password = e.target.value;\r\n    this.setState({\r\n      password: password,\r\n    });\r\n  };\r\n  handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    // console.log('emailref', this.emailInputref);\r\n    // console.log('passwordref', this.passwordInputref);\r\n    console.log(this.state);\r\n    this.props.dispatch(createuser(this.state));\r\n  };\r\n  componentWillUnmount() {\r\n    this.props.dispatch(clearauthstate());\r\n  }\r\n  render() {\r\n    const { error, inProgress, user, isLoggedIn } = this.props.auth;\r\n    if (isLoggedIn) {\r\n      return <Redirect to=\"/\" />;\r\n    }\r\n    console.log(this.props.auth);\r\n    return (\r\n      <div className=\"login-container\">\r\n        <div className=\"login-heading\">SignUp</div>\r\n        {error && <div className=\"alert-dialog\">{error}</div>}\r\n        {isLoggedIn && (\r\n          <div className=\"success-dialog\">{`Successfully signed in as ${user.user.name}`}</div>\r\n        )}\r\n        <form className=\"login-form\">\r\n          <input\r\n            type=\"text\"\r\n            required\r\n            placeholder=\"Enter your name\"\r\n            onChange={this.handleNameInput}\r\n            // ref={this.emailInputref}\r\n          ></input>\r\n          <input\r\n            type=\"email\"\r\n            required\r\n            placeholder=\"Enter your email\"\r\n            onChange={this.handleEmailInput}\r\n            // ref={this.emailInputref}\r\n          ></input>\r\n          <input\r\n            type=\"password\"\r\n            required\r\n            placeholder=\"Enter your password\"\r\n            onChange={this.handlePasswordInput}\r\n            // ref={this.passwordInputref}\r\n          ></input>\r\n          <input\r\n            type=\"password\"\r\n            required\r\n            placeholder=\"Enter password again\"\r\n            onChange={this.handleConfirmPasswordInput}\r\n            // ref={this.passwordInputref}\r\n          ></input>\r\n          {inProgress ? (\r\n            <button\r\n              type=\"submit\"\r\n              className=\"submit-btn\"\r\n              onClick={this.handleSubmit}\r\n              disabled={inProgress}\r\n            >\r\n              Signing Up\r\n            </button>\r\n          ) : (\r\n            <button\r\n              type=\"submit\"\r\n              className=\"submit-btn\"\r\n              onClick={this.handleSubmit}\r\n            >\r\n              Sign Up\r\n            </button>\r\n          )}\r\n        </form>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nfunction mapToState(state) {\r\n  return {\r\n    auth: state.auth,\r\n  };\r\n}\r\n\r\nexport default connect(mapToState)(SignUp);\r\n","import { EDIT_PROFILE_FAILED, EDIT_PROFILE_SUCCESS } from './actionTypes';\r\nimport URL from '../helper/urls';\r\nimport { logout } from './auth';\r\n\r\nlet url = URL.UploadPic();\r\n\r\nexport function UploadPic(id, file) {\r\n  let url = URL.UploadPic();\r\n  console.log(url);\r\n  console.log(file);\r\n  console.log(id);\r\n  return (dispatch) => {\r\n    const token = localStorage.getItem('token');\r\n    const formData = new FormData();\r\n    // Update the formData object\r\n    formData.append('avatar', file);\r\n\r\n    fetch(url, {\r\n      // Adding method type\r\n      method: 'POST',\r\n      // Adding body or contents to send\r\n      body: formData,\r\n      // Adding headers to the request\r\n      headers: {\r\n        Authorization: `Bearer ${token}`,\r\n      },\r\n    })\r\n      .then((response) => {\r\n        if (response.status == '401') {\r\n          dispatch(logout());\r\n        }\r\n        return response.json();\r\n      })\r\n      .then((data) => {\r\n        console.log(data);\r\n        if (data.success) {\r\n          localStorage.setItem('token', data.data.token);\r\n          setTimeout(() => {\r\n            dispatch(edit_profile_success(data.data.user));\r\n          }, 500);\r\n        } else {\r\n          setTimeout(() => {\r\n            dispatch(edit_profile_failed(data.error));\r\n          }, 500);\r\n        }\r\n      })\r\n      .catch((err) => console.log('error', err));\r\n  };\r\n}\r\n\r\nexport function edit_user_profile(name, password, confirmpassword, id) {\r\n  console.log(id);\r\n  let url = URL.editProfile();\r\n  return (dispatch) => {\r\n    const token = localStorage.getItem('token');\r\n    fetch(url, {\r\n      // Adding method type\r\n      method: 'POST',\r\n\r\n      // Adding body or contents to send\r\n      body: JSON.stringify({\r\n        name: name,\r\n        password: password,\r\n        confirmpassword: confirmpassword,\r\n        id: '' + id,\r\n      }),\r\n      // Adding headers to the request\r\n      headers: {\r\n        'Content-type': 'application/json; charset=UTF-8',\r\n        Authorization: `Bearer ${token}`,\r\n      },\r\n    })\r\n      .then((response) => {\r\n        if (response.status == '401') {\r\n          dispatch(logout());\r\n        }\r\n        return response.json();\r\n      })\r\n      .then((data) => {\r\n        console.log(data);\r\n        if (data.success) {\r\n          localStorage.setItem('token', data.data.token);\r\n          setTimeout(() => {\r\n            dispatch(edit_profile_success(data.data.user));\r\n          }, 500);\r\n        } else {\r\n          setTimeout(() => {\r\n            dispatch(edit_profile_failed(data.error));\r\n          }, 500);\r\n        }\r\n      })\r\n      .catch((err) => console.log('error', err));\r\n  };\r\n}\r\n\r\nexport function edit_profile_success(user) {\r\n  return {\r\n    type: EDIT_PROFILE_SUCCESS,\r\n    user: user,\r\n  };\r\n}\r\n\r\nexport function edit_profile_failed(error) {\r\n  return {\r\n    type: EDIT_PROFILE_FAILED,\r\n    error: error,\r\n  };\r\n}\r\n","import React, { Component } from 'react';\r\n\r\nimport { connect } from 'react-redux';\r\nimport { clearauthstate } from '../actions/auth';\r\nimport {\r\n  edit_profile_failed,\r\n  edit_user_profile,\r\n  UploadPic,\r\n} from '../actions/edit_profile';\r\nimport URLS from '../helper/urls';\r\n\r\nclass Settings extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      editmode: false,\r\n      name: props.auth.user.name,\r\n      password: '',\r\n      confirmpassword: '',\r\n      selectedFile: null,\r\n    };\r\n  }\r\n  handleUpload = () => {\r\n    const { user } = this.props.auth;\r\n    if (this.state.selectedFile) {\r\n      this.props.dispatch(UploadPic(user._id, this.state.selectedFile));\r\n    }\r\n  };\r\n\r\n  handleFile = (e) => {\r\n    console.log(e.target.files[0]);\r\n    this.setState({ selectedFile: e.target.files[0] });\r\n  };\r\n  handleChange = (val, fieldname) => {\r\n    this.setState({\r\n      [fieldname]: val,\r\n    });\r\n  };\r\n  handleEdit = () => {\r\n    this.setState({\r\n      editmode: true,\r\n    });\r\n  };\r\n  handleBack = () => {\r\n    this.setState({\r\n      editmode: false,\r\n    });\r\n  };\r\n  fun = () => {\r\n    const { error } = this.props.auth;\r\n    if (error == false) {\r\n      this.setState({\r\n        editmode: false,\r\n      });\r\n    }\r\n  };\r\n  handleSave = () => {\r\n    const { name, password, confirmpassword } = this.state;\r\n    if (\r\n      name.length == 0 ||\r\n      password.length == 0 ||\r\n      confirmpassword != password\r\n    ) {\r\n      this.props.dispatch(edit_profile_failed('Invalid Input'));\r\n    } else {\r\n      const id = this.props.auth.user._id;\r\n      console.log('Success', id);\r\n      this.props.dispatch(\r\n        edit_user_profile(name, password, confirmpassword, id)\r\n      );\r\n      setTimeout(this.fun, 1000);\r\n    }\r\n  };\r\n  componentWillUnmount() {\r\n    this.props.dispatch(clearauthstate());\r\n  }\r\n  render() {\r\n    const { editmode } = this.state;\r\n    const { user, error, profile_changed } = this.props.auth;\r\n    const img = URLS.SERVER_URL() + user.avatar;\r\n    console.log('IMAGE', img);\r\n    console.log(editmode);\r\n    return (\r\n      <div className=\"profile-container\">\r\n        <div className=\"user-icon\">\r\n          <img\r\n            src={\r\n              user.avatar !== undefined\r\n                ? img\r\n                : 'https://cdn-icons-png.flaticon.com/512/2922/2922506.png'\r\n            }\r\n          ></img>\r\n        </div>\r\n        <div className=\"setting-container\">\r\n          {error && <div className=\"alert-dialog\">{error}</div>}\r\n          {error == false && editmode == true && (\r\n            <div className=\"success-dialog\">Successfully Updated</div>\r\n          )}\r\n          <div className=\"show-field2\">\r\n            <input\r\n              className=\"show-field-input2\"\r\n              type=\"file\"\r\n              onChange={this.handleFile}\r\n            ></input>\r\n            <button className=\"upload-btn\" onClick={this.handleUpload}>\r\n              Upload\r\n            </button>\r\n          </div>\r\n          <div className=\"show-field\">\r\n            <div className=\"show-field-heading\">Email</div>\r\n            <div className=\"show-field-input\">{user.email}</div>\r\n          </div>\r\n          {editmode == false && (\r\n            <div className=\"show-field\">\r\n              <div className=\"show-field-heading\">Name</div>\r\n              <div className=\"show-field-input\">{user.name}</div>\r\n            </div>\r\n          )}\r\n          {editmode && (\r\n            <div className=\"show-input\">\r\n              <div className=\"show-field-heading\">Name</div>\r\n              <input\r\n                value={this.state.name}\r\n                onChange={(e) => {\r\n                  this.handleChange(e.target.value, 'name');\r\n                }}\r\n              ></input>\r\n            </div>\r\n          )}\r\n          {editmode && (\r\n            <div className=\"show-input\">\r\n              <div className=\"show-field-heading\">New Password</div>\r\n              <input\r\n                onChange={(e) => {\r\n                  this.handleChange(e.target.value, 'password');\r\n                }}\r\n              ></input>\r\n            </div>\r\n          )}\r\n          {editmode && (\r\n            <div className=\"show-input\">\r\n              <div className=\"show-field-heading\">Confirm Password</div>\r\n              <input\r\n                onChange={(e) => {\r\n                  this.handleChange(e.target.value, 'confirmpassword');\r\n                }}\r\n              ></input>\r\n            </div>\r\n          )}\r\n          <div className=\"Button-container\">\r\n            {editmode == false && (\r\n              <button className=\"setting-btn\" onClick={this.handleEdit}>\r\n                Edit Profile\r\n              </button>\r\n            )}\r\n            {editmode && (\r\n              <button className=\"setting-btn\" onClick={this.handleSave}>\r\n                Save Profile\r\n              </button>\r\n            )}\r\n            {editmode && (\r\n              <button className=\"setting-btn\" onClick={this.handleBack}>\r\n                Go Back\r\n              </button>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nfunction mapToState(state) {\r\n  return {\r\n    auth: state.auth,\r\n  };\r\n}\r\nexport default connect(mapToState)(Settings);\r\n","import {\r\n  USER_PROFILE_SUCCESS,\r\n  USER_PROFILE_FAILED,\r\n  USER_PROFILE_BEGIN,\r\n} from './actionTypes';\r\nimport URL from '../helper/urls';\r\nimport { logout } from './auth';\r\n\r\nexport function fetchProfile(id) {\r\n  return (dispatch) => {\r\n    const url = URL.fetchProfile(id);\r\n    dispatch(user_profile_begin());\r\n    const token = localStorage.getItem('token');\r\n    fetch(url, {\r\n      // Adding method type\r\n      method: 'GET',\r\n      // Adding headers to the request\r\n      headers: {\r\n        'Content-type': 'application/json; charset=UTF-8',\r\n        Authorization: `Bearer ${token}`,\r\n      },\r\n    })\r\n      .then((response) => {\r\n        if (response.status == '401') {\r\n          dispatch(logout());\r\n        }\r\n        return response.json();\r\n      })\r\n      .then((data) => {\r\n        console.log(data);\r\n        if (data.success) {\r\n          setTimeout(() => {\r\n            dispatch(user_profile_success(data.data.user));\r\n          }, 500);\r\n        } else {\r\n          setTimeout(() => {\r\n            dispatch(user_profile_failed(data.error));\r\n          }, 500);\r\n        }\r\n      })\r\n      .catch((err) => console.log('error', err));\r\n  };\r\n}\r\n\r\nexport function user_profile_begin() {\r\n  return {\r\n    type: USER_PROFILE_BEGIN,\r\n  };\r\n}\r\n\r\nexport function user_profile_success(user) {\r\n  return {\r\n    type: USER_PROFILE_SUCCESS,\r\n    user: user,\r\n  };\r\n}\r\n\r\nexport function user_profile_failed(error) {\r\n  return {\r\n    type: USER_PROFILE_FAILED,\r\n    error: error,\r\n  };\r\n}\r\n","import React, { Component } from 'react';\r\nimport { Redirect } from 'react-router';\r\n\r\nimport { connect } from 'react-redux';\r\nimport { fetchProfile } from '../actions/profile';\r\nimport { BoxesLoader } from 'react-awesome-loaders';\r\nimport {\r\n  AddFriend,\r\n  clear_friend_state,\r\n  RemoveFriend,\r\n} from '../actions/friends';\r\nimport { UploadPic } from '../actions/edit_profile';\r\nimport URLS from '../helper/urls';\r\n\r\nclass Profile extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n  }\r\n  handleAddfriend = () => {\r\n    const userId = this.props.match.params.userId;\r\n    this.props.dispatch(AddFriend(userId));\r\n  };\r\n  handleRemoveFriend = () => {\r\n    const userId = this.props.match.params.userId;\r\n    this.props.dispatch(RemoveFriend(userId));\r\n  };\r\n\r\n  componentDidMount() {\r\n    if (this.props.match.params.userId) {\r\n      this.props.dispatch(fetchProfile(this.props.match.params.userId));\r\n    }\r\n  }\r\n  componentDidUpdate(prevProps) {\r\n    const prevparam = prevProps.match.params;\r\n    const curparam = this.props.match.params;\r\n    if (curparam && prevparam && curparam.userId !== prevparam.userId) {\r\n      this.props.dispatch(fetchProfile(curparam.userId));\r\n    }\r\n  }\r\n  componentWillUnmount() {\r\n    this.props.dispatch(clear_friend_state());\r\n  }\r\n  checkIsUserFriend = () => {\r\n    const userId = this.props.match.params.userId;\r\n    const { user } = this.props.auth;\r\n    const { friendships } = this.props.friends;\r\n    let friendsuserids = [];\r\n    friendships.map((friendship) => {\r\n      let fid = friendship.from_user._id;\r\n      if (fid == user._id) {\r\n        fid = friendship.to_user._id;\r\n      }\r\n      friendsuserids.push(fid);\r\n    });\r\n    let indx = friendsuserids.indexOf(userId);\r\n    if (indx !== -1) {\r\n      return true;\r\n    }\r\n    return false;\r\n  };\r\n  render() {\r\n    let isfriend = this.checkIsUserFriend();\r\n    const profileuser = this.props.profile.user;\r\n    const signeduser = this.props.auth.user;\r\n    // console.log('PROFILE', this.props.location.aboutProps.post.user);\r\n    const { error, inProgress } = this.props.profile;\r\n    // console.log('current', this.state.selectedFile);\r\n    const img = URLS.SERVER_URL() + profileuser.avatar;\r\n    console.log('PROFILE', profileuser);\r\n    if (signeduser.email == profileuser.email) {\r\n      return <Redirect to=\"/settings\" />;\r\n    }\r\n    if (inProgress) {\r\n      return (\r\n        <div className=\"ploader\">\r\n          <BoxesLoader\r\n            boxColor={'#6366F1'}\r\n            style={{ marginBottom: '20px' }}\r\n            desktopSize={'128px'}\r\n            mobileSize={'80px'}\r\n          />\r\n        </div>\r\n      );\r\n    }\r\n    if (error) {\r\n      return <h1>{error}</h1>;\r\n    }\r\n    return (\r\n      <div className=\"profile-container\">\r\n        <div className=\"user-icon\">\r\n          <img\r\n            src={\r\n              profileuser.avatar !== undefined\r\n                ? img\r\n                : 'https://cdn-icons-png.flaticon.com/512/2922/2922506.png'\r\n            }\r\n          ></img>\r\n        </div>\r\n        <div className=\"setting-container\">\r\n          {this.props.friends.error && (\r\n            <div className=\"alert-dialog\">{this.props.friends.error}</div>\r\n          )}\r\n          {this.props.friends.error == false && (\r\n            <div className=\"success-dialog\">\r\n              Successfully {isfriend ? 'added' : 'removed'} friend\r\n            </div>\r\n          )}\r\n          <div className=\"show-field\">\r\n            <div className=\"show-field-heading\">Email</div>\r\n            <div className=\"show-field-input\">{profileuser.email}</div>\r\n          </div>\r\n          <div className=\"show-field\">\r\n            <div className=\"show-field-heading\">Name</div>\r\n            <div className=\"show-field-input\">{profileuser.name}</div>\r\n          </div>\r\n          <div className=\"Button-container\">\r\n            {isfriend == false ? (\r\n              <button\r\n                className=\"add-friend-btn\"\r\n                disabled={this.props.friends.inProgress}\r\n                onClick={this.handleAddfriend}\r\n              >\r\n                {this.props.friends.inProgress ? 'Adding Friend' : 'Add Friend'}\r\n              </button>\r\n            ) : (\r\n              <button\r\n                className=\"add-friend-btn\"\r\n                disabled={this.props.friends.inProgress}\r\n                onClick={this.handleRemoveFriend}\r\n              >\r\n                {this.props.friends.inProgress\r\n                  ? 'Removing Friend'\r\n                  : 'Remove Friend'}\r\n              </button>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nfunction mapToState(state) {\r\n  return {\r\n    auth: state.auth,\r\n    profile: state.profile,\r\n    friends: state.friends,\r\n  };\r\n}\r\nexport default connect(mapToState)(Profile);\r\n","import {\r\n  FETCH_CONVERSATION_SUCCESS,\r\n  FETCH_CONVERSATION_FAILED,\r\n  ADD_MESSAGE,\r\n  FETCH_CONVERSATION_START,\r\n  CLEAR_CONVERSATION,\r\n} from './actionTypes';\r\n\r\nimport { logout } from './auth';\r\nimport URLS from '../helper/urls';\r\n\r\nexport const fetch_conversation = (fid) => {\r\n  return (dispatch) => {\r\n    const url = URLS.get_conversation(fid);\r\n    const token = localStorage.getItem('token');\r\n    dispatch(fetch_conversation_begin());\r\n    fetch(url, {\r\n      // Adding method type\r\n      method: 'GET',\r\n      // Adding headers to the request\r\n      headers: {\r\n        'Content-type': 'application/json; charset=UTF-8',\r\n        Authorization: `Bearer ${token}`,\r\n      },\r\n    })\r\n      .then((response) => {\r\n        if (response.status == '401') {\r\n          dispatch(logout());\r\n        }\r\n        return response.json();\r\n      })\r\n      .then((data) => {\r\n        console.log('Data', data);\r\n        if (data.success) {\r\n          dispatch(fetch_conversation_success(data.data.conversation));\r\n        } else {\r\n          dispatch(fetch_conversation_failed(data.error));\r\n        }\r\n      })\r\n      .catch((err) => console.log('error', err));\r\n  };\r\n};\r\n\r\nexport function fetch_conversation_success(conversation) {\r\n  return {\r\n    type: FETCH_CONVERSATION_SUCCESS,\r\n    conversation: conversation,\r\n  };\r\n}\r\n\r\nexport function fetch_conversation_begin() {\r\n  return {\r\n    type: FETCH_CONVERSATION_START,\r\n  };\r\n}\r\nexport function fetch_conversation_failed(error) {\r\n  return {\r\n    type: FETCH_CONVERSATION_FAILED,\r\n    error: error,\r\n  };\r\n}\r\n\r\nexport function add_message(message) {\r\n  return {\r\n    type: ADD_MESSAGE,\r\n    message: message,\r\n  };\r\n}\r\n\r\nexport function clear_conversation() {\r\n  return {\r\n    type: CLEAR_CONVERSATION,\r\n  };\r\n}\r\n","import React, { Component } from 'react';\r\n\r\nclass Message extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n  }\r\n  render() {\r\n    const msg = this.props.msg;\r\n    // console.log(msg);\r\n    const { userId } = this.props;\r\n    return (\r\n      <div\r\n        className={\r\n          userId == msg.user._id ? 'self-msg-outer' : 'other-msg-outer'\r\n        }\r\n      >\r\n        <div className={userId == msg.user._id ? 'self' : 'other'}>\r\n          <div className=\"msgsender\">{msg.user.name}</div>\r\n          <div className=\"msg\">{msg.content}</div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Message;\r\n","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { Redirect } from 'react-router-dom';\r\nimport io from 'socket.io-client';\r\nimport {\r\n  add_message,\r\n  clear_conversation,\r\n  fetch_conversation,\r\n} from '../actions/conversation';\r\nimport Message from './Message';\r\nimport { XlviLoader } from 'react-awesome-loaders';\r\n\r\nclass Chat extends Component {\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n      message: '',\r\n    };\r\n    this.msgInput = React.createRef();\r\n    this.msgContainer = React.createRef();\r\n    this.socket = io.connect('https://socket-server-101.herokuapp.com');\r\n  }\r\n  handleSend = async () => {\r\n    const fid = this.props.match.params.fid;\r\n    console.log('CONVERSATION', fid);\r\n    if (this.state.message.length !== 0) {\r\n      let message = {};\r\n      message.content = this.state.message;\r\n      const { user } = this.props.auth;\r\n      message.user = {\r\n        name: user.name,\r\n        _id: user._id,\r\n        email: user.email,\r\n      };\r\n      this.socket.emit('send-message', message, fid);\r\n      this.msgInput.current.value = '';\r\n      this.setState({\r\n        message: '',\r\n      });\r\n    }\r\n  };\r\n  handleChange = (e) => {\r\n    this.setState({\r\n      message: e.target.value,\r\n    });\r\n  };\r\n  setupconnections = () => {\r\n    const self = this;\r\n    const socketConnecction = this.socket;\r\n    this.socket.on('connect', () => {\r\n      console.log('CONNECTION ESTABILISHED');\r\n      const fid = self.props.match.params.fid;\r\n      socketConnecction.emit('join_room', fid);\r\n    });\r\n    this.socket.on('receive-message', (message) => {\r\n      console.log('RECEIVED_DATA', message);\r\n      self.props.dispatch(add_message(message));\r\n    });\r\n  };\r\n  componentDidUpdate() {\r\n    if (this.msgContainer.current)\r\n      this.msgContainer.current.scrollIntoView({ behavior: 'smooth' });\r\n  }\r\n  componentDidMount() {\r\n    const fid = this.props.match.params.fid;\r\n    this.props.dispatch(fetch_conversation(fid));\r\n    this.setupconnections();\r\n  }\r\n  componentWillUnmount() {\r\n    this.socket.disconnect();\r\n    this.socket.off();\r\n    this.props.dispatch(clear_conversation());\r\n  }\r\n  render() {\r\n    const { user } = this.props.auth;\r\n    if (!user) {\r\n      return <Redirect to=\"/login\" />;\r\n    }\r\n    if (this.props.conversation.inProgress) {\r\n      return (\r\n        <div className=\"loader-box\">\r\n          <XlviLoader\r\n            boxColors={['#EF4444', '#F59E0B', '#6366F1']}\r\n            desktopSize={'128px'}\r\n            mobileSize={'100px'}\r\n            className=\"my-loader\"\r\n            desktopSize={'90px'}\r\n            mobileSize={'90px'}\r\n            text={'Fetching Conversation...'}\r\n            backColor=\"rgb(66, 110, 240)\"\r\n            frontColor=\"#4645F6\"\r\n          />\r\n        </div>\r\n      );\r\n    }\r\n    console.log('MESSAGE', this.props.conversation.conversation.messages);\r\n    let message = this.props.conversation.conversation.messages;\r\n    if (!message) {\r\n      message = [];\r\n    }\r\n    return (\r\n      <div className=\"mainright\">\r\n        <div className=\"msg-container\">\r\n          {message.map((msg, idx) => {\r\n            return <Message Key={idx} msg={msg} userId={user._id} />;\r\n          })}\r\n          {message.length == 0 && (\r\n            <div className=\"welcome-heading\">\r\n              <h1>{`Welcome to the chat ${user.name}!`}</h1>\r\n              <div>Say Hello to your friend</div>\r\n              <img\r\n                src=\"https://c.tenor.com/4BkYeeOwEUgAAAAC/waving-wave.gif\"\r\n                className=\"wave-img\"\r\n              ></img>\r\n            </div>\r\n          )}\r\n          <div ref={this.msgContainer}></div>\r\n        </div>\r\n        <div className=\"msg-input-container\">\r\n          <input\r\n            className=\"msginput\"\r\n            onChange={this.handleChange}\r\n            ref={this.msgInput}\r\n          ></input>\r\n          <button onClick={this.handleSend} className=\"sendbtn\">\r\n            Send\r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nfunction mapToState(state) {\r\n  return {\r\n    auth: state.auth,\r\n    conversation: state.conversation,\r\n  };\r\n}\r\n\r\nexport default connect(mapToState)(Chat);\r\n","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport posts from '../reducers/posts';\nimport { fetchposts } from '../actions/posts';\n\nimport {\n  BrowserRouter as Router,\n  Link,\n  Route,\n  Switch,\n  Redirect,\n} from 'react-router-dom';\nimport PostsList from './PostsList';\nimport Navbar from './Navbar';\nimport Home from './Home';\nimport Page404 from './Page404';\nimport Login from './Login';\nimport SignUp from './SignUp';\nimport jwt_decode from 'jwt-decode';\nimport { AuthenticateUser, logout } from '../actions/auth';\nimport Settings from './Settings';\nimport Profile from './Profile';\nimport Footer from './Footer';\nimport Chat from './Chat';\n\nconst PrivateRoute = (PrivateRouteProps) => {\n  const { isLoggedIn, path, component: Component } = PrivateRouteProps;\n  return (\n    <Route\n      path={path}\n      render={(props) => {\n        console.log('Props', props);\n        return isLoggedIn == true ? (\n          <Component {...props} />\n        ) : (\n          <Redirect\n            to={{\n              pathname: '/login',\n              state: {\n                from: props.location,\n              },\n            }}\n          />\n        );\n      }}\n    />\n  );\n};\nclass App extends Component {\n  componentDidMount() {\n    const token = localStorage.getItem('token');\n    if (token) {\n      const user = jwt_decode(token);\n      this.props.dispatch(AuthenticateUser(user));\n    }\n  }\n  render() {\n    const { posts, auth } = this.props;\n    console.log('loggedin', auth.isLoggedIn);\n    return (\n      <Router>\n        <div>\n          <Navbar />\n          <Switch>\n            <Route\n              exact={true}\n              path=\"/\"\n              render={(props) => {\n                return <Home {...props} />;\n              }}\n            />\n            <Route path=\"/login\" exact component={Login} />\n            <Route path=\"/Register\" exact component={SignUp} />\n            <PrivateRoute\n              path=\"/settings\"\n              exact\n              component={Settings}\n              isLoggedIn={auth.isLoggedIn}\n            />\n            <PrivateRoute\n              path=\"/user/:userId\"\n              exact\n              component={Profile}\n              isLoggedIn={auth.isLoggedIn}\n            />\n            <PrivateRoute\n              path=\"/chat/:fid\"\n              exact\n              component={Chat}\n              isLoggedIn={auth.isLoggedIn}\n            />\n            <Route component={Page404} />\n          </Switch>\n          <Footer />\n        </div>\n      </Router>\n    );\n  }\n}\n\n//switch will check for the first matching route and if found than it dont go below it breaks from that route only\nfunction maptostate(state) {\n  return {\n    posts: state.posts,\n    auth: state.auth,\n  };\n}\n// the below function basically provides the store context value available as props\n//maptostate defines the attributes which are required by the component\nexport default connect(maptostate)(App);\n","import {\r\n  LOGIN_FAILED,\r\n  LOGIN_START,\r\n  LOGIN_SUCCESS,\r\n  SIGNUP_START,\r\n  SIGNUP_FAILED,\r\n  SIGNUP_SUCCESS,\r\n  AUTHENTICATE_USER,\r\n  LOG_OUT,\r\n  CLEAR_AUTH_STATE,\r\n  EDIT_PROFILE_FAILED,\r\n  EDIT_PROFILE_SUCCESS,\r\n} from '../actions/actionTypes';\r\nconst initialAuthState = {\r\n  user: {},\r\n  error: null,\r\n  isLoggedIn: false,\r\n  inProgress: false,\r\n  profile: '',\r\n};\r\n\r\nexport default function auth(state = initialAuthState, action) {\r\n  console.log('action----->', action);\r\n  switch (action.type) {\r\n    case LOGIN_START: {\r\n      return {\r\n        ...state,\r\n        inProgress: true,\r\n      };\r\n    }\r\n    case LOGIN_SUCCESS: {\r\n      return {\r\n        ...state,\r\n        isLoggedIn: true,\r\n        inProgress: false,\r\n        error: null,\r\n        user: action.user,\r\n      };\r\n    }\r\n    case LOGIN_FAILED: {\r\n      return {\r\n        ...state,\r\n        inProgress: false,\r\n        error: action.error,\r\n      };\r\n    }\r\n    case SIGNUP_START: {\r\n      return {\r\n        ...state,\r\n        inProgress: true,\r\n      };\r\n    }\r\n    case SIGNUP_SUCCESS: {\r\n      return {\r\n        ...state,\r\n        isLoggedIn: true,\r\n        inProgress: false,\r\n        error: null,\r\n        user: action.user,\r\n      };\r\n    }\r\n    case SIGNUP_FAILED: {\r\n      return {\r\n        ...state,\r\n        inProgress: false,\r\n        error: action.error,\r\n      };\r\n    }\r\n    case AUTHENTICATE_USER: {\r\n      return {\r\n        ...state,\r\n        error: null,\r\n        user: action.user,\r\n        isLoggedIn: true,\r\n      };\r\n    }\r\n    case LOG_OUT: {\r\n      return {\r\n        user: {},\r\n        error: null,\r\n        isLoggedIn: false,\r\n        inProgress: false,\r\n      };\r\n    }\r\n    case CLEAR_AUTH_STATE: {\r\n      return {\r\n        ...state,\r\n        error: null,\r\n        editmode: false,\r\n      };\r\n    }\r\n    case EDIT_PROFILE_FAILED: {\r\n      return {\r\n        ...state,\r\n        inProgress: false,\r\n        error: action.error,\r\n      };\r\n    }\r\n    case EDIT_PROFILE_SUCCESS: {\r\n      return {\r\n        ...state,\r\n        isLoggedIn: true,\r\n        inProgress: false,\r\n        error: false,\r\n        user: action.user,\r\n        editmode: false,\r\n      };\r\n    }\r\n    default: {\r\n      return state;\r\n    }\r\n  }\r\n}\r\n","import {\r\n  CLEAR_PROFILE_STATE,\r\n  USER_PROFILE_BEGIN,\r\n  USER_PROFILE_FAILED,\r\n  USER_PROFILE_SUCCESS,\r\n} from '../actions/actionTypes';\r\n\r\nconst initialProfileState = {\r\n  inProgress: false,\r\n  user: {},\r\n  error: null,\r\n};\r\n\r\nexport default function profile(state = initialProfileState, action) {\r\n  switch (action.type) {\r\n    case USER_PROFILE_BEGIN: {\r\n      return {\r\n        ...state,\r\n        inProgress: true,\r\n        error: null,\r\n      };\r\n    }\r\n    case USER_PROFILE_SUCCESS: {\r\n      return {\r\n        ...state,\r\n        inProgress: false,\r\n        user: action.user,\r\n        error: null,\r\n      };\r\n    }\r\n    case USER_PROFILE_FAILED: {\r\n      return {\r\n        ...state,\r\n        inProgress: false,\r\n        error: action.error,\r\n      };\r\n    }\r\n    case CLEAR_PROFILE_STATE: {\r\n      return {\r\n        inProgress: false,\r\n        user: {},\r\n        error: null,\r\n      };\r\n    }\r\n    default: {\r\n      return state;\r\n    }\r\n  }\r\n}\r\n","import {\r\n  ADD_FRIEND_BEGIN,\r\n  ADD_FRIEND_FAILED,\r\n  ADD_FRIEND_SUCCESS,\r\n  CLEAR_FRIEND_STATE,\r\n  FETCH_USER_FRIENDS_BEGIN,\r\n  FETCH_USER_FRIENDS_FAILED,\r\n  FETCH_USER_FRIENDS_SUCCESS,\r\n  REMOVE_FRIEND_SUCCESS,\r\n  REMOVE_FRIEND_FAILED,\r\n  REMOVE_FRIEND_BEGIN,\r\n} from '../actions/actionTypes';\r\nconst initialFriendsState = {\r\n  friendships: [],\r\n  inProgress: false,\r\n  error: null,\r\n};\r\n\r\nexport default function friends(state = initialFriendsState, action) {\r\n  switch (action.type) {\r\n    case FETCH_USER_FRIENDS_FAILED: {\r\n      return {\r\n        ...state,\r\n        error: action.error,\r\n        inProgress: false,\r\n      };\r\n    }\r\n    case FETCH_USER_FRIENDS_BEGIN: {\r\n      return {\r\n        ...state,\r\n        error: null,\r\n        inProgress: true,\r\n      };\r\n    }\r\n    case FETCH_USER_FRIENDS_SUCCESS: {\r\n      return {\r\n        ...state,\r\n        error: null,\r\n        inProgress: false,\r\n        friendships: action.friendships,\r\n      };\r\n    }\r\n    case ADD_FRIEND_SUCCESS: {\r\n      return {\r\n        ...state,\r\n        error: false,\r\n        inProgress: false,\r\n        friendships: [...state.friendships, action.friendship],\r\n      };\r\n    }\r\n    case ADD_FRIEND_BEGIN: {\r\n      return {\r\n        ...state,\r\n        inProgress: true,\r\n        error: null,\r\n      };\r\n    }\r\n    case ADD_FRIEND_FAILED: {\r\n      return {\r\n        ...state,\r\n        inProgress: false,\r\n        error: action.error,\r\n      };\r\n    }\r\n    case CLEAR_FRIEND_STATE: {\r\n      return {\r\n        ...state,\r\n        inProgress: false,\r\n        error: null,\r\n      };\r\n    }\r\n    case REMOVE_FRIEND_SUCCESS: {\r\n      return {\r\n        ...state,\r\n        error: false,\r\n        inProgress: false,\r\n        friendships: state.friendships.filter(\r\n          (friendship) => friendship._id !== action.id\r\n        ),\r\n      };\r\n    }\r\n    case REMOVE_FRIEND_BEGIN: {\r\n      return {\r\n        ...state,\r\n        inProgress: true,\r\n        error: null,\r\n      };\r\n    }\r\n    case REMOVE_FRIEND_FAILED: {\r\n      return {\r\n        ...state,\r\n        inProgress: false,\r\n        error: action.error,\r\n      };\r\n    }\r\n    default: {\r\n      return state;\r\n    }\r\n  }\r\n}\r\n","import { CLEAR_SERACH, FETCH_SEARCH_USERS } from '../actions/actionTypes';\r\n\r\nconst initialSearchState = {\r\n  results: [],\r\n};\r\n\r\nexport default function search(state = initialSearchState, action) {\r\n  switch (action.type) {\r\n    case FETCH_SEARCH_USERS: {\r\n      return {\r\n        ...state,\r\n        results: action.results,\r\n      };\r\n    }\r\n    case CLEAR_SERACH: {\r\n      return {\r\n        results: [],\r\n      };\r\n    }\r\n    default: {\r\n      return state;\r\n    }\r\n  }\r\n}\r\n","import {\r\n  ADD_MESSAGE,\r\n  FETCH_CONVERSATION_START,\r\n  FETCH_CONVERSATION_SUCCESS,\r\n  FETCH_CONVERSATION_FAILED,\r\n  CLEAR_CONVERSATION,\r\n} from '../actions/actionTypes';\r\n\r\nconst initialConversationState = {\r\n  conversation: {},\r\n  inProgress: false,\r\n  error: null,\r\n};\r\n\r\nexport default function conversation(state = initialConversationState, action) {\r\n  switch (action.type) {\r\n    case FETCH_CONVERSATION_FAILED: {\r\n      return {\r\n        ...state,\r\n        error: action.error,\r\n        inProgress: false,\r\n      };\r\n    }\r\n    case FETCH_CONVERSATION_START: {\r\n      return {\r\n        ...state,\r\n        error: null,\r\n        inProgress: true,\r\n      };\r\n    }\r\n    case FETCH_CONVERSATION_SUCCESS: {\r\n      return {\r\n        ...state,\r\n        error: null,\r\n        inProgress: false,\r\n        conversation: action.conversation,\r\n      };\r\n    }\r\n    case CLEAR_CONVERSATION: {\r\n      return initialConversationState;\r\n    }\r\n    case ADD_MESSAGE: {\r\n      let conv = state.conversation;\r\n      conv.messages.push(action.message);\r\n      return {\r\n        ...state,\r\n        conversation: conv,\r\n      };\r\n    }\r\n    default: {\r\n      return state;\r\n    }\r\n  }\r\n}\r\n","import { combineReducers } from 'redux';\r\nimport posts from './posts';\r\nimport auth from './auth';\r\nimport profile from './profile';\r\nimport friends from './friends';\r\nimport search from './search';\r\n\r\nimport conversation from './conversation';\r\nexport default combineReducers({\r\n  posts,\r\n  auth,\r\n  profile,\r\n  friends,\r\n  search,\r\n  conversation,\r\n});\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App';\nimport configureStore from './store/index';\nimport { Provider } from 'react-redux';\n\nconst store = configureStore();\n\nconsole.log(store.getState());\n\nReactDOM.render(\n  <Provider store={store}>\n    <React.StrictMode>\n      <App />\n    </React.StrictMode>\n  </Provider>,\n  document.getElementById('root')\n);\n","import { applyMiddleware, combineReducers, createStore } from 'redux';\r\nimport thunk from 'redux-thunk';\r\nimport reducer from '../reducers/index';\r\nimport logger from 'redux-logger';\r\n\r\nlet store;\r\n\r\nexport default function configureStore() {\r\n  store = createStore(reducer, applyMiddleware(logger, thunk));\r\n  return store;\r\n}\r\n"],"sourceRoot":""}